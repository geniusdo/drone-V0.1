# drone-V0.1
## 器件简介
### 电源
电源参数为：4000mAh-30C-14.8V-4S1P
电源使用**注意事项**：
1. 请勿过放（每片电芯放完电的电压不低于3.3V——即总电压不低于13.2V），过放易损伤电池，如鼓胀；
2. 请勿在无人看顾的情况下充电；
3. 请勿过充（每片芯片充满电的电压不超过4.25V——即总电压不高于17V）
4. 在充电/放电之前，请检查电池的每片电芯电压是否正常，若单片电芯电压显示低于正常电压（3.3V/cell）,或电池组每片电芯电压不平衡，则该电池存在质量问题，请勿对此电池进行充电；
5. 长期不使用的电池，保存电压请控制在3.8-3.85V之间。另外，请保证每两个星期检查一次电池保存盒状态有无异常，每两个月内进行一次充放电激活，以维持电池的稳定性。
### 电机与电调
|产品规格|推荐电池|4SLiPo|
|-|-|-|
| |最大拉力|850克/轴（14.8V，海平面）|
| |推荐起飞重量|350-400克/轴（海平面）|
| |使用环境温度|-10~40摄氏度|
|电调|最大允许电压|17.4V|
| |最大允许电流（持续）|20A|
| |最大允许峰值电流（3秒）|30A|
| |PWM输入信号电平|3.3V/5V兼容|
| |兼容信号频率|30~450Hz|
| |电池|3S~4SLiPo|
| |尺寸|54×24×9mm|
| |线长|420mm|
| |重量（不含线）|12.5g|
| |重量（含线）|27g|
|电机|定子尺寸|23×12mm|
| |KV|800rpm/V|
| |重量|56g|
|螺旋桨|直径/螺距|24×12.7cm（9.4×5.0inch）|
||重量（单个）|13g|
### TFmini——S激光雷达模块
![模块参数](https://user-images.githubusercontent.com/102523494/160787784-71069ad3-b4bf-4b5e-9741-79f500451a13.png)
### GL93.6光流
**电气参数**：外部供电2.8V（2.7-3.1V），整机耗电20~30mA。

GL9306支持串口输出和I2C输出

利用USB转TTL模块可以使用一下程序调试GL9306光流，注意需要3.3V供电

[光流调试程序](https://github.com/geniusdo/drone-V0.1/files/8379183/default.zip)

### 电流计
**功能**：电流计用于检测电池电压和电池电流，飞控板接收这两个信号，计算电池剩余电量，估算剩余飞行时间。

模块参数会涉及最大输入电压与可测量的最大电流，实现控制板对电池电量和电压的监测。

### 飞控

[ACFLY A9飞控用户手册](https://github.com/geniusdo/drone-V0.1/files/8378765/ACFLY.A9.V2.2.pdf)

## 无人机启动流程

[无人机起飞流程.pdf](https://github.com/geniusdo/drone-V0.1/files/8379452/1.0.pdf)

### 供电
对应引脚参照PDF流程飞控供电端口说明

### 遥控器设置
旧遥控器，参照《无人机起飞流程.pdf》page.3

### 电机桨叶方向
参照《飞控手册》page.9

### 调参
一般情况下，所有机架都可使用默认参数起飞，后根据飞行情况调试以下参数。

1. 无人机高频振荡发抖需将 b 参数调大，一般只需调 AC_Roll_b、AC_Pitch_b。
 无人机打杆软绵绵没力需将 b 参数调小，一般只需调 AC_Roll_b、AC_Pitch_b。
 
  **实测本机在b值15以上飞行状况稳定。**

2. T 参数（参数名：AC_T）：飞行器电机的惯性时间常数。飞机桨加速至期望值的时间越长，
此参数越大。此参数过小飞行器会高频振荡发抖。针对特定机型，此参数需微调。此参数
越小（电机加速快），抗扰性能越好，此参数太小会导致 b 怎么调都会有震荡现象。此参
数大不会震荡但是抗扰性能会打折扣。

  **实测本机在t值低于0.02时出现明显高频震荡抖动，t值在0.2-0.7范围内较为稳定**

3. 传感器位置偏移设置： 详见《飞控手册》page.25；

实际上由于所使用传感器的误差有几厘米，若非传感器距离飞控中心位置太远，没必要调整

### 串口设置
若需连接外部传感器，只需要将其连至任一UART口(4pin，TTL)，并在地面站中设置对应UART串口功能，详情见《飞控手册》page.25

## 附录

[ros](https://sychaichangkun.gitbooks.io/ros-tutorial-icourse163/content/chapter2/2.2.html)
[古月居](https://www.guyuehome.com/)

[ACFly与电调标准固件代码](https://github.com/geniusdo/drone-V0.1/files/8379151/default.zip)


固件更新可使用SD卡方式更新或者使用地面站连接更新，详细见《飞控手册》page.15
若采用地面站连接烧录固件，需下载如下DFU驱动：

[DFU驱动](https://github.com/geniusdo/drone-V0.1/files/8379222/DFU.zip)

